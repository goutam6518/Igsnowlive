<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Profile - IGS Games</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      background-color: #f9f9f9;
    }

    header {
      background-color: #111;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 2em;
      position: relative;
    }

    #signOutBtn {
      position: absolute;
      right: 20px;
      top: 20px;
      background-color: #ff4d4d;
      border: none;
      color: white;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
      display: none;
    }

    #authButtons {
      text-align: center;
      margin: 20px;
    }

    #authButtons button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 1em;
      border-radius: 8px;
      border: none;
      background-color: #007bff;
      color: white;
      cursor: pointer;
    }

    #profileContainer {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-top: 20px;
    }

    #profileContainer img {
      width: 120px;
      height: 120px;
      object-fit: cover;
      border-radius: 50%;
      margin-bottom: 10px;
    }

    .field {
      margin: 10px 0;
    }

    .field input {
      width: 100%;
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 1em;
    }

    #editBtn, #saveBtn {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 10px 16px;
      margin-top: 15px;
      border-radius: 5px;
      cursor: pointer;
    }

    #saveBtn {
      display: none;
    }

    #gameList {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 15px;
      margin: 30px auto;
      max-width: 1000px;
      padding: 0 20px;
    }

    .gameCard {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: center;
      padding: 10px;
    }

    .gameCard img {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: 6px;
    }

    .gameCard p {
      margin: 10px 0 0;
      font-weight: bold;
    }

    #homeBtn {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 20px;
      font-size: 1em;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <header>
    My Profile
    <button id="signOutBtn">Sign Out</button>
  </header>

  <div id="authButtons">
    <button id="signInToggle">Sign In</button>
    <div id="loginCreateButtons" style="display: none;">
      <button onclick="window.location.href='auth.html'">Login</button>
      <button onclick="window.location.href='auth.html'">Create Account</button>
    </div>
  </div>

  <div id="profileContainer">
    <div style="text-align:center;">
      <img id="logoPreview" src="placeholder.png" alt="Profile Logo">
      <input type="file" id="logoInput" accept="image/*" style="display:none;">
    </div>
    <div class="field">
      <label>Name:</label>
      <input type="text" id="username" disabled>
    </div>
    <div class="field">
      <label>Studio Name:</label>
      <input type="text" id="studio" disabled>
    </div>
    <button id="editBtn">Edit Profile</button>
    <button id="saveBtn">Save Profile</button>
  </div>

  <h2 style="text-align:center;margin-top:40px;">Uploaded Games</h2>
  <div id="gameList"></div>

  <button id="homeBtn" onclick="window.location.href='index.html'">Home</button>

  <script type="module">
    // Simulate Firebase Game Fetching
    const gameList = document.getElementById("gameList");
    const sampleGames = [
      { gameName: "Galaxy Rush", gameLogoUrl: "https://via.placeholder.com/150x120" },
      { gameName: "Dragon Blade", gameLogoUrl: "https://via.placeholder.com/150x120" }
    ];

    sampleGames.forEach(game => {
      const div = document.createElement("div");
      div.className = "gameCard";
      div.innerHTML = \`
        <img src="\${game.gameLogoUrl}" alt="">
        <p>\${game.gameName}</p>
      \`;
      gameList.appendChild(div);
    });

    // Profile Editing
    const editBtn = document.getElementById("editBtn");
    const saveBtn = document.getElementById("saveBtn");
    const username = document.getElementById("username");
    const studio = document.getElementById("studio");
    const logoInput = document.getElementById("logoInput");
    const logoPreview = document.getElementById("logoPreview");

    editBtn.onclick = () => {
      username.disabled = false;
      studio.disabled = false;
      logoInput.style.display = "block";
      saveBtn.style.display = "inline-block";
      editBtn.style.display = "none";
    };

    saveBtn.onclick = () => {
      username.disabled = true;
      studio.disabled = true;
      logoInput.style.display = "none";
      saveBtn.style.display = "none";
      editBtn.style.display = "inline-block";
    };

    logoInput.onchange = (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (e) => {
          logoPreview.src = e.target.result;
        };
        reader.readAsDataURL(file);
      }
    };

    // Simulated Auth UI Toggle
    const signInToggle = document.getElementById("signInToggle");
    const loginCreateButtons = document.getElementById("loginCreateButtons");
    const signOutBtn = document.getElementById("signOutBtn");

    let isSignedIn = false;

    signInToggle.onclick = () => {
      loginCreateButtons.style.display = 'block';
    };

    document.querySelectorAll("#loginCreateButtons button").forEach(btn => {
      btn.onclick = () => {
        // Simulate Sign Up
        isSignedIn = true;
        loginCreateButtons.style.display = 'none';
        signInToggle.style.display = 'none';
        signOutBtn.style.display = 'inline-block';
      };
    });

    signOutBtn.onclick = () => {
      isSignedIn = false;
      loginCreateButtons.style.display = 'none';
      signInToggle.style.display = 'inline-block';
      signOutBtn.style.display = 'none';
    };
  </script>
</body>
</html>
